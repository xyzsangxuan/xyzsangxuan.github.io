---
title: 开发一款移动设备上运行的2D游戏
date: 2020-10-29 08:04:31
tags: 
    - Unity2D
categories: 
    - 游戏引擎
    - Unity
cover: /img/cover1.png
top_img: /img/cover1.png
---
# Unit 1 Asset
## Section 1 Create Project 创建项目
## Section 2 Prepare 准备工作
## Section 3 Setup Assets 资源设置
下载并导入素材，切割素材，设置素材的参数
# Unit 2 Build Your Level
## Section 1 Use Tilemap 使用Tilemap瓦片地图   
使用Tilemap，导入瓦片图片信息并绘制场景。
## Section 2 Rule Tile 规则瓦片
安装 Unity 官方 2D-Extra 扩展包
https://github.com/Unity-Technologies/2d-extras
https://github.com/Unity-Technologies/2d-extras.git#master
## Section 3 Tilemap Collider 瓦片碰撞器
瓦片地图碰撞器，了解 Tilemap Collider 2D 和 Composite Collider 的使用方法。
## Section 4 Other Objects 其他物体
创建场景中的其他物体，设置 刚体 / 碰撞体 / Sorting Layer
## Section 5 Physics 2D & Prefab 2D物理及预制体
项目物理碰撞关系设置。Prefab 预制体的使用
# Unit 3 Create Player
## Section 1 Setup Player 创建玩家 
设置 Player 必要的组件，调整各项组件的参数。设置碰撞体大小和碰撞关系。
## Section 2 Movement 基本的移动
通过代码让 Player 可以移动。Input Manager 使用方法。反转人物
## Section 3 Jump 跳跃
Update 和 FixedUpdate 的使用方法。地面物理检测 Physics2D 的函数方法。OnDrawGizmos 可视化的范围调整。
# Unit 4 Animation
## Section 1 Setup Animation 设置动画
Animation 制作 2D Spite 帧动画。制作多个需要的动画片段。
## Section 2 Animator States 动画控制器状态
学习动画状态机的切换方法。设置参数和条件。使用代码控制切换动画。
## Section 3 Jump VFX 跳跃的特效
制作 跳跃 / 落地 的帧动画特效。代码控制播放的时机。碰撞关系。
# Unit 5 Create Bomb
## Section 1 Setup Bomb 创建炸弹
创建炸弹，添加必要的组件。调整碰撞关系。创建三种状态动画。
## Section 2 Bomb Explosion 炸弹爆炸效果
创建 Animation Event 调用的函数方法实现爆炸效果。通过 Collider2D[] 获得范围内物体数组，实现炸开弹飞效果。
# Unit 6 Create Enemy Scripts & AI
## Section 1 Setup Basic Enemy 设置基本敌人
创建基本敌人 Cucumber 黄瓜怪。设置帧动画。添加 碰撞体 / 刚体。设置碰撞图层，调整碰撞关系。
## Section 2 More Elements 更多的组件
设置巡逻点。添加设置攻击检测范围。调整 Check Area 碰撞图层和关系。
## Section 3 Basic Methods 基本函数方法
创建 Enemy 代码中的基本函数方法。实现 巡逻 / 移动  / 反转 / 添加攻击列表的方法。学习 List<> 的使用。
## Section 4 Inheritance 继承
创建单独的 Cucumber 代码并继承 Enemy 基类。学习 virtual 函数方法如何在子类当中 override 重写。调整代码和参数。
## Section 5 Finite States Machine 有限状态机
了解 FSM 状态机的概念 / 抽象类概念 / 抽象函数方法。用抽象类继承创建2个敌人AI状态：PatrolState / AttackState。
## Section 6 Animator States 动画状态机
在 Animator 窗口当中，使用多个 Layer 来控制管理多种动画状态。并且通过代码脚本来控制动画的切换。
## Section 7 Switch Attack Target 切换攻击目标
从供给列表中找到离自己最近的作为目标，并且判断目标的 Tag 是 Player 或者 Bomb 来执行不同的攻击方式。
## Section 8 Attack Action 攻击方式
创建攻击有关的变量，实现 AttackAction 和 SkillAction 两个函数方法。判断攻击距离与攻击间隔同时满足条件的情况，采取相应的行动。
## Section 9 Hit Point 打击点
创建攻击点 Hit Point 录制动画实现攻击 Player 的方法。创建 HitPoint 代码脚本。
## Section 10 Skill Action 技能攻击方式
通过实际创建 Cucumber 的吹灭炸弹特殊技能，了解当敌人的攻击目标是炸弹的时候，如何采取特殊技能效果。
## Section 11 Interface：IDamageable 创建接口
了解学习 Interface 接口的概念，通过创建 1 个接口来实现访问所有继承这个接口的代码脚本。轻松实现炸弹爆炸让周围的人物都有受到伤害的效果。
# Section 12 Player Get Hit 玩家获得伤害
通过 IDamageable 接口实现玩家受伤，并且受伤动画播放期间短暂无敌。创建敌人警示标示，学习 协程 的使用方法。
# Unit 7 Skill Action for Each Enemies
## Section 1 Bald Pirate 光头海盗
光头海盗的特殊技能：踢炸弹。HitPoint 代码添加弹开效果。
## Section 2 Big Guy 大块头
实现大块头拾取炸弹并扔向玩家的方法。添加 Animation Event 设置 PickUp Point。
## Section 3 Captain 舰长
实现粉色船长看见炸弹反跑。学习利用 Sprite Renderer 组件的 FilpX 参数实现翻转。
## Section 4 Whale 鲸鱼
添加 Animation Event 实现吞灭炸弹。趣味添加吞下炸弹体积变大。
# Unit 8 User Interface
## Section 1 Create Canvas 创建画布
了解基本 UGUI 的使用方法。添加 Player Health Bar 并设置 Canvas 的自动缩放。
## Section 2 Update Health 更新生命值
创建 UIManager 代码学习单例模式。获得玩家血量，并实时更新 UI 血量显示。
## Section 3 Pause Menu 暂停菜单
创建暂停菜单，学习 Button 组件的用法。通过代码 暂停 / 恢复游戏。
## Section 4 Boss Health Bar Boss血条
学习 Slider 组件用法。创建 Boss 血条获得实时更新。
# Unit 9 Game Manager
## Section 1 Game Over 游戏结束画面
创建 GameManager 代码脚本，生成单例。连接 Player 的状态，全局控制游戏的结束。添加 GameOver Panel 实现死亡弹出菜单重新开始游戏。
## Section 2 Way to the Next Room 通往下一关
学习如何使用 Platform Effector 组件创建单项平台。创建 Door 入口和出口并创建代码。实现消灭所有敌人后开门的动画，Player 进入触发范围跳转下一场景。观察者模式的使用。
## Section 3 Save Data 保存数据
学习了解 PlayerPrafs 的用法。保存 Player 的血量延续到下一关。在过关时保存数据。
## Section 4 Fix bugs 调整bugs
调整一些代码的执行顺序，进一步更改观察者模式的代码设计方法。创建 Main Menu。
## Section 5 Load Game 加载游戏进度
实现保存游戏场景，让玩家可以延续之前的游戏进度。Main Menu 各种 Button 的函数方法实现。
## Unit 10 Build for Mobile & Monetization
# Section 1 Mobile Platform Control 移动平台控制方法 
下载使用 Asset Store 当中 Joystick 插件，创建屏幕横向控制器，创建按钮实现跳跃和攻击时放炸弹。重新调整代码配合 Button 的 On Click Event。
## Section 2 Build and Run 生成并运行
分别学习如何生成 Android 和 iOS 平台，注意事项。Xcode 基本使用方法。真机测试。
## Section 3 Prepare for Unity Ads 为Unity广告做好准备
Advertisement package 介绍安装。Dashboard 网页端创建项目准备工作。Unity 编辑器中启动 Service 并连接到项目，打开 Ads。
## Section 4 Watch Ads 观看广告
学习查看 API 手册的方法，实现播放奖励广告。代码控制播放广告后获得广告收益。真机操作和注意事项。

PS.--------------------------------更新------------------------------

* 泛型单例基类 ：目的是当项目量级增加时，减少重复代码

* 事件中心：目的是通过观察者模式监听事件，减少Bug和梳理清晰结构

* Mono工具类：目的是减少Monobehaviour的继承，优化性能，统一提供帧数更新和协程的方法

* 资源加载器：统一提供同步和异步加载的方法，针对复杂情况的私人定制

* 缓存池：提升重复大量object出现时的性能

* 场景切换模块：统一提供同步和异步场景切换的方法，依旧是视情况而定制

* 音乐音效模块：提供统一的音乐，音效控制方法

* UI 管理模块：方便管理所有显示的面板，提供给外部 显示和隐藏等接口

* 广告管理模块：提前准备广告，避免加载的不及时

PS.--------------------------------更新------------------------------

* 配置表：方便大量的角色，npc，地图等的编辑

* 时间线：  目前是在动画上添加事件，时间线的目的舍弃手动在动画固定帧添加事件，而是通过代码定制

* 定时器管理器：目的是方便定时器的实例和管理

* 编辑器扩展：自定义编辑引擎的一些功能自用

* 对话框系统：可以较为方便的为每个对话npc设置对话

* 随机地图：增加游戏可玩性，随机NPC ，

* 背包系统：增加可玩性，持续性

* AssetBundles热更新系统：
接下来的工作：
装备栏、技能栏，人物成长，怪物强度成长
设置记录过去和未来的爬塔层数
剧情
配置表（是否可替代）
联机

第二个NPC：有些人笑着笑着就哭了
//第一个NPC（欢乐的悲伤）：我为什么要做人，做人有生离死别，有悲伤，有难过，人除了自我安慰，自我调整什么也做不了，我们改变不了生死，改变不了时间。人太痛苦。人的悲欢并不相通，我的痛苦就是我的痛苦。我的欢乐未必是我的换欢乐。